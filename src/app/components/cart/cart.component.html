<div *ngIf="!usedInSidebar" class="container-fluid">
	<nav class="app-breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a routerLink="/home" routerLinkActive="active">Home</a></li>
			<li aria-current="page" class="breadcrumb-item active">Cart</li>
		</ol>
	</nav>
</div>
<div class="container-fluid">
	<div class="position-fixed bottom-0 end-0 p-3 pb-5" style="z-index: 11">
		<div #orderRemoveToast aria-atomic="true" aria-live="assertive"
			 class="toast align-items-center text-white bg-warning border-0" role="alert">
			<div class="d-flex">
				<div class="toast-body">
					Pizza order removed from the cart!
				</div>
			</div>
		</div>
	</div>
	<div class="d-flex justify-content-between">
		<h1 class="display-6">Cart</h1>
		<button *ngIf="(selectedPizzas | async)?.length"
				class="btn btn-success align-self-center"
				routerLink="/order-confirmation">Checkout
		</button>
	</div>
	<div *ngIf="(selectedPizzas | async)?.length">
		<div class="d-flex justify-content-center">
			<h5>
				Order total
				<small class="text-muted">${{12.99 * (selectedPizzas | async).length}}</small>
			</h5>
		</div>
		<div class="d-flex justify-content-center align-items-start">
			<h5>
				Creation time
				<small class="text-muted">~{{5 * (selectedPizzas | async).length}} mins</small>
			</h5>
		</div>
	</div>
	<div *ngIf="!(selectedPizzas | async)?.length">
		<div class="d-flex justify-content-center">
			<p class="lead">Cart is empty</p>
		</div>
	</div>

	<div *ngIf="(selectedPizzas | async)?.length" [ngClass]="{ 'row-cols-md-3' : !usedInSidebar}"
		 class="row row-cols-1 g-4">
		<div *ngFor="let pizza of (selectedPizzas | async); index as i;" class="col">
			<div class="card h-100 app-shadow">
				<div class="card-body">
					<h3 class="card-title">{{pizza.name}}</h3>
					<h4 class="card-subtitle mb-2 text-muted text-lowercase">
						{{pizza.crust.name}} sauce, {{pizza.sauce.name}} crust,
						<span [innerHTML]="displayToppings(pizza.toppings)"></span>
					</h4>
				</div>
				<div class="card-footer">
					<small class="text-muted">
						<div class="row align-items-center">
							<div class="col">
								<div class="row row-cols-1">
									<div class="col"><strong>Price:</strong> $12.99</div>
									<div class="col"><strong>Quantity:</strong> {{ pizza.qty }}</div>
								</div>
							</div>
							<div class="col-auto">
								<button (click)="onClickRemovePizza(i)" class="btn btn-danger">Remove</button>
							</div>
						</div>
					</small>
				</div>
			</div>
		</div>
	</div>
</div>
